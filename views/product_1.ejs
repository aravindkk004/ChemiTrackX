<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="product_1.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
     <!-- font awesome -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
     <title>ChemiTrackX</title>
    <link rel="icon" href="/images/logo.png" type="image/x-icon">
</head>
<body>
    <div class="container">
        <nav>
            <div class="left_nav">
                <div class="home_nav">
                    <a href="product_page"><i class="fa fa-arrow-left"></i><p>Back</p></a>
                </div>
            </div>
            <div class="right_nav">
                <p id="profile_btn"><i class="fa-solid fa-user"></i>Profile</p> 
            </div>
            <div class="profile">
                <div class="name">
                    <a href=""><span class="material-symbols-outlined">
                        factory
                    </span><p>Thirumalai Chemicals</p></a>
                </div>
                <div class="settings">
                    <a href=""><i class="fa-solid fa-gear"></i><p>Settings</p></a>
                </div>
                <div class="notify">
                    <a href=""><i class="fa-solid fa-bell"></i><p>Notifications</p></a>
                </div>
                <div class="out">
                    <a href="/"><i class="fa-solid fa-right-from-bracket"></i><p>Logout</p></a>
                </div>
            </div>
        </nav>
        <div class="main_bar">
            <div class="chem_name">
                <h1>Dicarboxylic Anhydrides:</h1>
            </div>
            <div class="search_bar">
                <input type="search" placeholder="Search Chemical name here.">
                <span class="material-symbols-outlined">
                    search
                </span>
            </div>
            <div class="add_row">
                <div class="year">
                    <p>Year:</p>
                    <select name="" id="">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        <option value="2019">2019</option>
                        <option value="2018">2018</option>
                        <option value="2017">2017</option>
                        <option value="2016">2016</option>
                    </select>
                </div>
                <div class="add">
                    <a href="add_product"><button class="add"><span class="material-symbols-outlined" id="add">add</span> Add</button></a>
                </div>
            </div>
            <form method="POST" id="data_form">
                <table bgcolor="black">
                    <thead>
                        <tr bgcolor="blue">
                            <th>Product</th>
                            <th>Production Volume</th>
                            <th>Capacity Utilization Rate</th>
                            <th>Cost of Production</th>
                            <th>Market Price</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody bgcolor="#ffffff" align="center">
                        <% tableData.forEach((item) => { %>
                            <tr id="data" class="data">
                                <td><%= item.name %></td>
                                <td><%= item.volume %> tonnes</td>
                                <td><%= item.rate %>%</td>
                                <td>$<%= item.cost %>per tonne</td>
                                <td>$<%= item.price %>per tonne</td>
                                <td><a href="update_product/<%= item._id %>"><span class="material-symbols-outlined" id="edit">
                                    edit_square
                                    </span></a>
                                <span class="material-symbols-outlined" id="delete" onclick="deleteProduct('<%= item._id %>')">
                                    delete
                                </span></td>
                        <% }); %>
                    </tbody>
                </table>
            </form>
            <div class="nxt-btns">
                <p><i class="fa-solid fa-backward"></i>Previous</p>
                <p>1/1</p>
                <p>Next<i class="fa-solid fa-forward"></i></p>
            </div>
            <div class="choosepro">
                <p>To know more about the product details, select the product here.</p>
                <div class="options">
                    <% tableData.forEach((item) => { %>
                        <a href="data"><%= item.name %></a>
                    <% }) %>
                </div>
            </div>
            <div class="addons">
                <h2>Additional data:</h2>
                <div class="boxes_add">
                    <div class="foot-box">
                        <h2>Environmental Compilance:</h2>
                        <p>Emissions: Within regulatory limits.</p>
                        <p>Waste Disposal: Compliant with Environmental standards.</p>
                    </div>
                    <div class="foot-box">
                        <h2>Regultory Updates:</h2>
                        <p>New emissions regulations introduced in Q1, requiring emissions reduction by 20% over the next five years.</p>
                    </div>
                    <div class="foot-box">
                        <h2>Safety incidents:</h2>
                        <p>Total incidents: 2</p>
                        <p>Injuries: 1</p>
                        <p>Spills: 1</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright">
            <div class="left_copy">
                <p><span class="material-symbols-outlined">
                    copyright
                    </span>ChemiTrackX. All rights reserved.</p>
            </div>
            <div class="right_copy">
                <ul>
                    <li>Support</li>
                    <li>License</li>
                    <li>Terms of Use</li>
                    <li>Blog</li>
                </ul>
            </div>
        </div>
    </div>
    <script>
        function deleteProduct(productId) {
          if (confirm("Are you sure you want to delete this product?")) {
            // Send a POST request to the server to delete the product
            fetch(`/delete_product/${productId}`, {
              method: 'POST'
            })
            .then(response => {
              if (response.status === 200) {
                // Reload the page to reflect the updated product list
                location.reload();
              } else {
                console.error("Error deleting the product");
              }
            });
          }
        }
    </script>
    <script src="../js/product_1.js"></script>
</body>
</html>