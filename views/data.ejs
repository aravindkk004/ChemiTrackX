<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="product_1.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
     <!-- font awesome -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
     <title>ChemiTrackX</title>
    <link rel="icon" href="/images/logo.png" type="image/x-icon">
</head>
<body>
    <div class="container">
        <nav>
            <div class="left_nav">
                <div class="home_nav">
                    <a href="product_1"><i class="fa fa-arrow-left"></i><p>Back</p></a>
                </div>
            </div>
            <div class="right_nav">
                <p id="profile_btn"><i class="fa-solid fa-user"></i>Profile</p> 
            </div>
            <div class="profile">
                <div class="name">
                    <a href=""><span class="material-symbols-outlined">
                        factory
                    </span><p>Thirumalai Chemicals</p></a>
                </div>
                <div class="settings">
                    <a href=""><i class="fa-solid fa-gear"></i><p>Settings</p></a>
                </div>
                <div class="notify">
                    <a href=""><i class="fa-solid fa-bell"></i><p>Notifications</p></a>
                </div>
                <div class="out">
                    <a href="/"><i class="fa-solid fa-right-from-bracket"></i><p>Logout</p></a>
                </div>
            </div>
        </nav>
        <div class="main_bar">
            <div class="chem_name">
                <h1>Phthalic Anhydride:</h1>
            </div>
            <div class="search_bar">
                <input type="search" placeholder="Search Product name here.">
                <span class="material-symbols-outlined">
                    search
                </span>
            </div>
            <div class="add_row">
                <div class="year">
                    <p>Year:</p>
                    <select name="" id="">
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        <option value="2019">2019</option>
                        <option value="2018">2018</option>
                        <option value="2017">2017</option>
                        <option value="2016">2016</option>
                    </select>
                </div>
                <div class="add">
                    <a href="add_data"><button class="add"><span class="material-symbols-outlined" id="add">add</span> Add Product</button></a>
                </div>
            </div>
            <form method="POST" id="data_form">
                <table bgcolor="black">
                    <thead>
                        <tr bgcolor="blue">
                            <th>Year</th>
                            <th>Import</th>
                            <th>Export</th>
                            <th>Production Rate</th>>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody bgcolor="#ffffff" align="center">
                        <% tableDatas.forEach((item) => { %>
                            <tr id="data" class="data">
                                <td><%= item.year %></td>
                                <td><%= item.imports %> tonnes</td>
                                <td><%= item.exports %>tonnes</td>
                                <td>$<%= item.rate %>%</td>
                                <td><a href="update_data/<%= item._id %>"><span class="material-symbols-outlined" id="edit">
                                    edit_square
                                    </span></a>
                                <span class="material-symbols-outlined" id="delete" onclick="deleteProduct('<%= item._id %>')">
                                    delete
                                </span></td>
                        <% }); %>
                    </tbody>
                </table>
            </form>
            <div class="nxt-btns">
                <p><i class="fa-solid fa-backward"></i>Previous</p>
                <p>1/1</p>
                <p>Next<i class="fa-solid fa-forward"></i></p>
            </div>
            <div class="generate">
                <p>Generate Product Data Sheet:</p>
                <button id="download">Download</button>
            </div>
            <div class="addons">
                <h2>Additional data:</h2>
                <div class="boxes_add">
                    <div class="foot-box">
                        <h2>Financial Data:</h2>
                        <p>Revenue(2023):$1 billion</p>
                        <p>Profit(2023):$200 billion</p>
                        <p>Debt(2023):$300 billion</p>
                    </div>
                    <div class="foot-box">
                        <h2>Regultory Data:</h2>
                        <p>Regulation: European Union REACH regultion standard: ASTM D1246</p>
                        <P>Requirement: Ethylene products must be labeled with their chemical composition and hazards.</P>
                    </div>
                    <div class="foot-box">
                        <h2>Environmental Data:</h2>
                        <p>Pollutant: Greenhouse gas emissions</p>
                        <p>Emissions(2023):1 million tonnes of CO2 equivalent</p>
                        <p>Reduction Target: Reduce emissions by 40% by 2030.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="mng-btn">
            <button>Manage Data</button>
        </div>
        <div class="copyright">
            <div class="left_copy">
                <p><span class="material-symbols-outlined">
                    copyright
                    </span>ChemiTrackX. All rights reserved.</p>
            </div>
            <div class="right_copy">
                <ul>
                    <li>Support</li>
                    <li>License</li>
                    <li>Terms of Use</li>
                    <li>Blog</li>
                </ul>
            </div>
        </div>
    </div>
    <script>
        function deleteProduct(productId) {
          if (confirm("Are you sure you want to delete this product?")) {
            // Send a POST request to the server to delete the product
            fetch(`/delete_data/${productId}`, {
              method: 'POST'
            })
            .then(response => {
              if (response.status === 200) {
                // Reload the page to reflect the updated product list
                location.reload();
              } else {
                console.error("Error deleting the product");
              }
            });
          }
        }
    </script>
    <script src="../js/product_1.js"></script>
</body>
</html>